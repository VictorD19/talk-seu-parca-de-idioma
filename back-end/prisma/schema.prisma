generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    String    @id @default(uuid()) @db.Uuid
  nome                  String
  telefone             String    @unique
  linguagem_preferida   String    
  tipo_mensagem_preferida String 
  genero_agente        String  
  nome_agente          String    @default("Talka")
  thread_id            String?  
  created_at           DateTime  @default(now())
  updated_at           DateTime  @updatedAt
  messages             Message[]

  @@map("users")
}

model Message {
  id         String   @id @default(uuid()) @db.Uuid
  user_id    String   @db.Uuid
  sender     String  
  content    String
  type       String   
  created_at DateTime @default(now())
  user       User     @relation(fields: [user_id], references: [id])

  @@map("messages")
}

model AgentConfig {
  id            String @id @default(uuid()) @db.Uuid
  nome          String
  genero        String
  personalidade String
  prompt_base   String @db.Text

  @@map("agent_configs")
}